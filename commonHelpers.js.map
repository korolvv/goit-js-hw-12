{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["function renderItem(array) {\n  const result = array\n    .map(item => {\n      return `<li class=\"userItem\">\n            <a class='link_photo' href=\"${item.largeImageURL}\"\n              ><img class=\"mini_photo\" src=\"${item.webformatURL}\" alt=\"${item.tags}\" title=\"${item.tags}\"\n            /></a>\n            <ul class=\"counter\">\n              <li class=\"counter_wrapper\">\n                <h3 class=\"likes\">Likes</h3>\n                <p class=\"likes_amount\">${item.likes}</p>\n              </li>\n              <li class=\"counter_wrapper\">\n                <h3 class=\"views\">Views</h3>\n                <p class=\"views_amount\">${item.views}</p>\n              </li>\n              <li class=\"counter_wrapper\">\n                <h3 class=\"comments\">Comments</h3>\n                <p class=\"comments_amount\">${item.comments}</p>\n              </li>\n              <li class=\"counter_wrapper\">\n                <h3 class=\"downloads\">Downloads</h3>\n                <p class=\"downloads_amount\">${item.downloads}</p>\n              </li>\n            </ul>\n          </li>`;\n    })\n    .join('');\n  return result;\n}\n\nexport default renderItem;\n","import axios from 'axios';\n\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport renderItem from './render-functions';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst getQuery = async (request, page) => {\n  const params = {\n    key: '43243729-04275528cc78ca8d3cba6ce95',\n    q: request,\n    image_type: 'photo',\n    orientation: 'horizontal',\n    safesearch: true,\n    per_page: 15,\n    page,\n  };\n  const response = await axios.get('https://pixabay.com/api/?', { params });\n  return response.data;\n};\n\nfunction useApi(request, userList, loader, loadMore, page) {\n  getQuery(request, page)\n    .then(data => {\n      const { total, totalHits, hits } = data;\n      if (total === 0) {\n        loader.classList.add('hidden');\n        loadMore.classList.add('hidden');\n        iziToast.error({\n          position: 'topRight',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n        });\n      } else {\n        const pictures = hits;\n        const item = renderItem(pictures);\n        userList.insertAdjacentHTML('beforeend', item);\n        const lightbox = new SimpleLightbox('.userItem a');\n        loader.classList.add('hidden');\n        if (15 * page > totalHits) {\n          iziToast.error({\n            position: 'topRight',\n            message:\n              \"We're sorry, but you've reached the end of search results.\",\n          });\n          loadMore.classList.add('hidden');\n        } else {\n          loadMore.classList.remove('hidden');\n        }\n        lightbox.refresh();\n        if (page > 1) {\n          smoothScroll();\n        }\n      }\n    })\n    .catch(error => {\n      loadMore.classList.add('hidden');\n      throw new Error(error);\n    });\n}\n\nfunction smoothScroll() {\n  const card = document.querySelector('.userItem');\n  const measures = card.getBoundingClientRect();\n  console.log(window.innerHeight);\n  window.scrollBy({\n    top: measures.height * 2,\n    behavior: 'smooth',\n  });\n}\n\nexport default useApi;\n","import useApi from './js/pixabay-api';\n\nconst form = document.querySelector('form');\nconst userList = document.querySelector('.userList');\nconst loader = document.querySelector('.loader');\nconst loadMore = document.querySelector('.load_more');\n\nlet request;\nlet page = 1;\n\nform.addEventListener('submit', e => {\n  e.preventDefault();\n  loader.classList.remove('hidden');\n  userList.innerHTML = '';\n  request = form.elements.request.value;\n\n  useApi(request, userList, loader, loadMore, 1);\n});\n\nloadMore.addEventListener('click', () => {\n  page += 1;\n  if (page === 2) {\n    userList.after(loader);\n  }\n  loader.classList.remove('hidden');\n  loadMore.classList.add('hidden');\n  useApi(request, userList, loader, loadMore, page);\n});\n"],"names":["renderItem","array","item","getQuery","request","page","params","axios","useApi","userList","loader","loadMore","data","total","totalHits","hits","iziToast","lightbox","SimpleLightbox","smoothScroll","error","measures","form","e"],"mappings":"owBAAA,SAASA,EAAWC,EAAO,CA4BzB,OA3BeA,EACZ,IAAIC,GACI;AAAA,0CAC6BA,EAAK,aAAa;AAAA,8CACdA,EAAK,YAAY,UAAUA,EAAK,IAAI,YAAYA,EAAK,IAAI;AAAA;AAAA;AAAA;AAAA;AAAA,0CAK7DA,EAAK,KAAK;AAAA;AAAA;AAAA;AAAA,0CAIVA,EAAK,KAAK;AAAA;AAAA;AAAA;AAAA,6CAIPA,EAAK,QAAQ;AAAA;AAAA;AAAA;AAAA,8CAIZA,EAAK,SAAS;AAAA;AAAA;AAAA,gBAIvD,EACA,KAAK,EAAE,CAEZ,CCrBA,MAAMC,EAAW,MAAOC,EAASC,IAAS,CACxC,MAAMC,EAAS,CACb,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAC,CACJ,EAEE,OADiB,MAAME,EAAM,IAAI,4BAA6B,CAAE,OAAAD,CAAM,CAAE,GACxD,IAClB,EAEA,SAASE,EAAOJ,EAASK,EAAUC,EAAQC,EAAUN,EAAM,CACzDF,EAASC,EAASC,CAAI,EACnB,KAAKO,GAAQ,CACZ,KAAM,CAAE,MAAAC,EAAO,UAAAC,EAAW,KAAAC,CAAI,EAAKH,EACnC,GAAIC,IAAU,EACZH,EAAO,UAAU,IAAI,QAAQ,EAC7BC,EAAS,UAAU,IAAI,QAAQ,EAC/BK,EAAS,MAAM,CACb,SAAU,WACV,QACE,0EACZ,CAAS,MACI,CAEL,MAAMd,EAAOF,EADIe,CACe,EAChCN,EAAS,mBAAmB,YAAaP,CAAI,EAC7C,MAAMe,EAAW,IAAIC,EAAe,aAAa,EACjDR,EAAO,UAAU,IAAI,QAAQ,EACzB,GAAKL,EAAOS,GACdE,EAAS,MAAM,CACb,SAAU,WACV,QACE,4DACd,CAAW,EACDL,EAAS,UAAU,IAAI,QAAQ,GAE/BA,EAAS,UAAU,OAAO,QAAQ,EAEpCM,EAAS,QAAO,EACZZ,EAAO,GACTc,GAEH,CACP,CAAK,EACA,MAAMC,GAAS,CACd,MAAAT,EAAS,UAAU,IAAI,QAAQ,EACzB,IAAI,MAAMS,CAAK,CAC3B,CAAK,CACL,CAEA,SAASD,GAAe,CAEtB,MAAME,EADO,SAAS,cAAc,WAAW,EACzB,wBACtB,QAAQ,IAAI,OAAO,WAAW,EAC9B,OAAO,SAAS,CACd,IAAKA,EAAS,OAAS,EACvB,SAAU,QACd,CAAG,CACH,CCpEA,MAAMC,EAAO,SAAS,cAAc,MAAM,EACpCb,EAAW,SAAS,cAAc,WAAW,EAC7CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAW,SAAS,cAAc,YAAY,EAEpD,IAAIP,EACAC,EAAO,EAEXiB,EAAK,iBAAiB,SAAUC,GAAK,CACnCA,EAAE,eAAc,EAChBb,EAAO,UAAU,OAAO,QAAQ,EAChCD,EAAS,UAAY,GACrBL,EAAUkB,EAAK,SAAS,QAAQ,MAEhCd,EAAOJ,EAASK,EAAUC,EAAQC,EAAU,CAAC,CAC/C,CAAC,EAEDA,EAAS,iBAAiB,QAAS,IAAM,CACvCN,GAAQ,EACJA,IAAS,GACXI,EAAS,MAAMC,CAAM,EAEvBA,EAAO,UAAU,OAAO,QAAQ,EAChCC,EAAS,UAAU,IAAI,QAAQ,EAC/BH,EAAOJ,EAASK,EAAUC,EAAQC,EAAUN,CAAI,CAClD,CAAC"}